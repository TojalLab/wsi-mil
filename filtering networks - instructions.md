
# Tile filtering preprocessing

There are three options for filtering tiles.
 - 9tissues
 - BRCATU
 - TUNTINV

## 9tissues

This network was trained on the publicly available NCT-CRC-HE-100K dataset, available [here](https://zenodo.org/record/1214456). It uses a 224px tile sampled at 0.5mpp and classifies it as one of 9 classes. It can use it to filter background tiles or other classes of interest by setting the following elements inside the `create_tiles` in config file as:

```yaml
remove_tiles: '9tissues'
    remove_tiles_labels_exclude:
        - BACK
```

Details regarding other detected tile classes can be found on its [official Zenodo page](https://zenodo.org/record/1214456).

## BRCATU

This is a custom trained deep neural network `ConvNext-tiny`, trained on a combination of publicly available data. In particular, examples of the `TU` (Tumor class) were obtained and preprocessed in the form of tiles from annotations of TCGA slides, available [here](https://zenodo.org/record/5320076). Additionally, we use the `BG` (Background) class of the the NCT-CRC-HE-100K dataset. The `NT` class is generated by training on all tissues not recognized as one of those two classes.

It generates of the three classes for each slide:
 - BG: Background tile
 - NT: any other tissue not recognized as tumor
 - TU: tissue from the tumor enviroment

```yaml
remove_tiles: 'BRCATU'
remove_tiles_labels_exclude:
    - BG
    - NT
```

## TUNTINV

The TUNTINV filtering network is custom trained `ConvNext-tiny` deep CNN, trained with a combination of the previously described `BRCATU` Neural Network and manually annotated patches of invasive tumor. This network focuses on identifying tiles containing invasive tumor.

It also classifies tiles as the following class:
 - BKG: background
 - NOT\_TUM: other tissues that are not tumor
 - TUM\_OTHER: tiles containing non-invasive tumor
 - TUM\_INV: tiles classified as invasive tumor

```yaml
remove_tiles: 'TUNTINV'
    remove_tiles_labels_exclude:
        - BKG
        - NOT_TUM
        - TUM_OTHER
```
